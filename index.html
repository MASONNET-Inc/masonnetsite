<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>MASONNET Web 3.0</title>
  <meta name="description" content="MASONNET Web 3.0 — demo site" />
  <style>
    :root{
      --bg:#ff0000;
      --fg:#ffffff;
      --muted:rgba(255,255,255,0.9);
      --card:rgba(255,255,255,0.03);
      --glass:rgba(255,255,255,0.04);
      --panel:#121212;
      --safe-bottom:calc(env(safe-area-inset-bottom,0px) + 16px);
      --island-max:980px;
      --focus:rgba(255,255,255,0.12);
      --shadow:0 8px 30px rgba(0,0,0,0.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial,Helvetica,sans-serif;-webkit-font-smoothing:antialiased;background:var(--bg);color:var(--fg);display:flex;align-items:center;justify-content:center;padding:28px}
    a{color:inherit;text-decoration:underline}

    .container{width:100%;max-width:1200px;background:linear-gradient(180deg,rgba(0,0,0,0.06),rgba(0,0,0,0.02));border-radius:14px;padding:28px;box-shadow:var(--shadow)}
    .logo{display:block;margin:0 auto 12px;width:clamp(140px,20vw,360px);height:auto}
    h1{margin:6px 0 4px;font-size:clamp(20px,4.2vw,34px);font-weight:800}
    .lead{margin:0 0 16px;color:var(--muted);max-width:72ch;margin-left:auto;margin-right:auto;text-align:center}

    .grid{display:grid;grid-template-columns:1fr 320px;gap:20px;align-items:start;margin-top:20px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}

    .card{background:var(--card);padding:16px;border-radius:12px;text-align:left;color:var(--muted)}
    .card h3{margin:0 0 8px;color:#fff;font-size:16px}
    .card p{margin:0 0 10px}

    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.03);color:var(--muted);font-size:14px}
    .table th{color:#fff;font-weight:700;text-align:left}

    /* Button island */
    .button-island{position:fixed;left:50%;transform:translateX(-50%);bottom:var(--safe-bottom);z-index:1200;display:flex;gap:12px;padding:12px;align-items:center;justify-content:space-between;width:min(calc(100% - 32px),var(--island-max));background:var(--glass);border-radius:999px;box-shadow:0 8px 30px rgba(0,0,0,0.28);backdrop-filter:blur(6px)}
    .btn{all:unset;display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 14px;border-radius:10px;cursor:pointer;color:var(--fg);min-width:54px}
    .btn.primary{background:rgba(255,255,255,0.04);font-weight:700}
    .icon{width:28px;height:28px;display:inline-block;vertical-align:middle;fill:currentColor;color:#fff;opacity:0.98}

    .info-btn{width:52px;height:52px;display:inline-grid;place-items:center;border-radius:12px;background:var(--card);cursor:pointer}
    .info-panel{position:fixed;right:16px;bottom:calc(var(--safe-bottom) + 80px);z-index:1250;width:clamp(180px,20vw,320px);background:var(--panel);color:#fff;padding:12px;border-radius:10px;display:none;box-shadow:0 10px 30px rgba(0,0,0,0.45)}
    .info-panel.visible{display:block}
    .version-pill{background:rgba(255,255,255,0.03);padding:6px 10px;border-radius:999px;font-weight:700;font-size:13px;display:inline-block}
    .panel-view{display:inline-flex;gap:10px;align-items:center;padding:8px 12px;border-radius:999px;background:rgba(255,255,255,0.02);font-weight:700;font-size:14px;margin-top:10px}

    /* Tooltip */
    [data-tooltip]{position:relative}
    [data-tooltip]:hover::after,[data-tooltip]:focus::after{content:attr(data-tooltip);position:absolute;left:50%;transform:translateX(-50%);bottom:calc(100% + 10px);background:#0b0b0b;color:#fff;padding:6px 8px;border-radius:8px;font-size:13px;white-space:nowrap;z-index:1300;box-shadow:0 10px 30px rgba(0,0,0,0.45)}
    [data-tooltip]:hover::before,[data-tooltip]:focus::before{content:"";position:absolute;left:50%;transform:translateX(-50%) rotate(45deg);bottom:calc(100% + 2px);width:10px;height:10px;background:#0b0b0b;z-index:1300}

    footer{margin-top:28px;color:var(--muted);font-size:13px;text-align:center}

    @media(max-width:520px){.icon{width:22px;height:22px}.info-btn{width:48px;height:48px}.button-island{padding:10px;gap:8px}}
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="siteTitle">
    <img src="logo.png" alt="MASONNET logo" class="logo" />
    <h1 id="siteTitle">MASONNET Web 3.0</h1>
    <p class="lead">A living, experimental site demonstrating responsive UI, accessibility, and modular components. Replace content below with your production pages as needed.</p>

    <div class="grid" aria-live="polite">
      <main>
        <section class="card" aria-labelledby="overviewTitle">
          <h3 id="overviewTitle">Overview</h3>
          <p>This site illustrates the core UI, controls, and layout patterns used across MASONNET. Use the button island at the bottom to navigate sections and reveal utilities.</p>
        </section>

        <section class="card" style="margin-top:16px" aria-labelledby="playTitle">
          <h3 id="playTitle">Interactive Playground</h3>
          <p>Responsive tiles, sample table, and placeholder controls.</p>

          <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:14px">
            <div class="card" style="padding:14px">
              <h4 style="margin:0 0 8px;color:#fff">Tile A</h4>
              <p style="margin:0 0 8px">Quick actions and preview</p>
              <div style="display:flex;gap:8px">
                <button class="btn" data-tooltip="Action 1" aria-label="Action 1">Action</button>
                <button class="btn" data-tooltip="Details" aria-label="Details">Details</button>
              </div>
            </div>

            <div class="card" style="padding:14px">
              <h4 style="margin:0 0 8px;color:#fff">Tile B</h4>
              <p style="margin:0 0 8px">Component demo</p>
              <div style="display:flex;gap:8px">
                <button class="btn" data-tooltip="Open" aria-label="Open">Open</button>
                <button class="btn" data-tooltip="Share" aria-label="Share">Share</button>
              </div>
            </div>

            <div class="card" style="padding:14px">
              <h4 style="margin:0 0 8px;color:#fff">Tile C</h4>
              <p style="margin:0 0 8px">Placeholder</p>
              <div style="display:flex;gap:8px">
                <button class="btn" data-tooltip="Edit" aria-label="Edit">Edit</button>
                <button class="btn" data-tooltip="Remove" aria-label="Remove">Remove</button>
              </div>
            </div>
          </div>

          <div style="margin-top:16px;overflow:auto">
            <table class="table" role="table" aria-label="Sample data table">
              <thead>
                <tr><th>Name</th><th>Status</th><th>Updated</th></tr>
              </thead>
              <tbody>
                <tr><td>Project Alpha</td><td>WIP</td><td>2 days ago</td></tr>
                <tr><td>Component Library</td><td>Stable</td><td>1 week ago</td></tr>
                <tr><td>Deployment Pipeline</td><td>Testing</td><td>3 hours ago</td></tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="card" style="margin-top:16px" aria-labelledby="docsTitle">
          <h3 id="docsTitle">Docs & Notes</h3>
          <p>Extend this area with product docs, changelogs, or instructions for collaborators.</p>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px">
            <div style="background:rgba(0,0,0,0.04);padding:12px;border-radius:10px">
              <h4 style="color:#fff">Getting Started</h4>
              <pre style="background:rgba(0,0,0,0.02);padding:10px;border-radius:6px;color:var(--muted);overflow:auto"># Example local dev
git clone &lt;repo&gt;
npm install
netlify dev</pre>
            </div>

            <div style="background:rgba(0,0,0,0.04);padding:12px;border-radius:10px">
              <h4 style="color:#fff">API</h4>
              <p style="color:var(--muted)">List your endpoints and integration notes here.</p>
            </div>
          </div>
        </section>
      </main>

      <aside>
        <div class="card">
          <h3 style="color:#fff">Quick Links</h3>
          <ul style="margin:8px 0 0 18px;color:var(--muted)">
            <li><a href="#" aria-label="Repo">Repo</a></li>
            <li><a href="#" aria-label="Netlify Dashboard">Netlify Dashboard</a></li>
            <li><a href="#" aria-label="Design Tokens">Design Tokens</a></li>
          </ul>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 style="color:#fff">Metrics</h3>
          <div style="display:flex;flex-direction:column;gap:8px">
            <div style="display:flex;justify-content:space-between;color:var(--muted)"><span>Uptime</span><strong style="color:#fff">99.99%</strong></div>
            <div style="display:flex;justify-content:space-between;color:var(--muted)"><span>Requests</span><strong style="color:#fff">—</strong></div>
            <div style="display:flex;justify-content:space-between;color:var(--muted)"><span>Views</span><strong id="viewsLabel">—</strong></div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 style="color:#fff">Contact</h3>
          <p style="color:var(--muted)">Email <a href="mailto:masonnet@masonnet.org">masonnet@masonnet.org</a></p>
        </div>
      </aside>
    </div>

    <footer><div style="max-width:980px;margin:14px auto 0;color:var(--muted);font-size:13px">© Mason Murphy — MASONNET</div></footer>
  </div>

  <!-- Info panel (hidden by default) -->
  <div id="infoPanel" class="info-panel" role="dialog" aria-hidden="true" tabindex="-1">
    <div style="display:flex;flex-direction:column;align-items:center;gap:8px">
      <div class="version-pill">Version 1.0</div>
      <div style="font-size:13px;color:var(--muted)">by Mason Murphy & MASONNET</div>
      <div class="panel-view">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 8.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7z" fill="currentColor"/></svg>
        <span id="viewsLabel2">—</span>
      </div>
      <a href="mailto:masonnet@masonnet.org" style="color:var(--muted);text-decoration:underline">Contact Us</a>
    </div>
  </div>

  <!-- Bottom floating navigation -->
  <nav class="button-island" role="navigation" aria-label="Primary navigation">
    <div style="display:flex;align-items:center;gap:8px">
      <button class="btn primary" data-tooltip="Home" aria-label="Home" id="btnHome"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 11.5L12 4l9 7.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V11.5z" fill="currentColor"/></svg></button>
      <button class="btn" data-tooltip="Games" aria-label="Games" id="btnGames"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 10a4 4 0 0 0-4 4v1a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-1a4 4 0 0 0-4-4H6z" fill="currentColor"/></svg></button>
      <button class="btn" data-tooltip="Projects" aria-label="Projects" id="btnProjects"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 7a2 2 0 0 1 2-2h4l2 2h6a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7z" fill="currentColor"/></svg></button>
      <button class="btn" data-tooltip="More" aria-label="More" id="btnMore"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="5.5" cy="12" r="1.95" fill="currentColor"/><circle cx="12" cy="12" r="1.95" fill="currentColor"/><circle cx="18.5" cy="12" r="1.95" fill="currentColor"/></svg></button>
    </div>

    <div style="display:flex;align-items:center;gap:8px">
      <button id="infoBtn" class="info-btn" data-tooltip="Info" aria-label="Info" aria-expanded="false" title="Info"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="9.3" fill="none" stroke="currentColor" stroke-width="1.15"/><circle cx="12" cy="8.3" r="1.05" fill="currentColor"/><rect x="11.05" y="10.6" width="1.9" height="5.0" rx="0.55" fill="currentColor"/></svg></button>
    </div>
  </nav>

  <script>
    (function(){
      const infoBtn = document.getElementById('infoBtn');
      const infoPanel = document.getElementById('infoPanel');
      const btnHome = document.getElementById('btnHome');
      const btnGames = document.getElementById('btnGames');
      const btnProjects = document.getElementById('btnProjects');
      const btnMore = document.getElementById('btnMore');

      // Info panel toggle (a11y)
      let lastFocus = null;
      function toggleInfo(force){
        const show = typeof force === 'boolean' ? force : !infoPanel.classList.contains('visible');
        if (show){
          lastFocus = document.activeElement;
          infoPanel.classList.add('visible');
          infoPanel.setAttribute('aria-hidden','false');
          infoBtn.setAttribute('aria-expanded','true');
          try{ infoPanel.focus({preventScroll:true}); }catch(e){}
        } else {
          infoPanel.classList.remove('visible');
          infoPanel.setAttribute('aria-hidden','true');
          infoBtn.setAttribute('aria-expanded','false');
          try{ if (lastFocus) lastFocus.focus(); }catch(e){}
        }
      }
      infoBtn.addEventListener('click', ()=> toggleInfo());
      infoBtn.addEventListener('keydown', (e)=> { if (e.key==='Enter' || e.key===' ') { e.preventDefault(); toggleInfo(); } });
      document.addEventListener('click', (e)=> {
        if (!infoPanel.classList.contains('visible')) return;
        if (infoPanel.contains(e.target) || infoBtn.contains(e.target)) return;
        toggleInfo(false);
      }, {capture:true});
      document.addEventListener('keydown', (e)=> { if (e.key === 'Escape') toggleInfo(false); });

      // Simple navigation demos (scroll to sections)
      function flash(card){
        if(!card) return;
        card.style.transition = 'box-shadow .22s, transform .18s';
        card.style.boxShadow = '0 12px 40px rgba(0,0,0,0.45)';
        card.style.transform = 'translateY(-4px)';
        setTimeout(()=>{ card.style.boxShadow=''; card.style.transform=''; }, 400);
      }
      btnHome.addEventListener('click', ()=> { const el=document.querySelector('#overviewTitle'); if(el) { el.scrollIntoView({behavior:'smooth',block:'center'}); flash(el.closest('.card')); } });
      btnGames.addEventListener('click', ()=> { const el=document.querySelector('#interactiveTitle'); if(el){ el.scrollIntoView({behavior:'smooth',block:'center'}); flash(el.closest('.card')); } });
      btnProjects.addEventListener('click', ()=> { const el=document.querySelector('#contentListTitle'); if(el){ el.scrollIntoView({behavior:'smooth',block:'center'}); flash(el.closest('.card')); } });
      btnMore.addEventListener('click', ()=> { toggleInfo(true); });

      // View counter (CountAPI) with suppression
      (function viewCounter(){
        const ns='masonnet_org', key='site_views';
        const hitUrl=`https://api.countapi.xyz/hit/${encodeURIComponent(ns)}/${encodeURIComponent(key)}`;
        const getUrl=`https://api.countapi.xyz/get/${encodeURIComponent(ns)}/${encodeURIComponent(key)}`;
        const localVisitKey='masonnet_lastvisit';
        const storedKey='masonnet_localcount';
        const threshold=60*60*1000;
        const now=Date.now();
        let last=0;
        try{ last=parseInt(localStorage.getItem(localVisitKey)||'0',10);}catch(e){last=0}
        const within = !isNaN(last) && (now-last)<threshold;
        const show = v => {
          try { const text = (typeof v==='number')?v.toLocaleString():String(v); document.getElementById('viewsLabel').textContent = text; document.getElementById('viewsLabel2').textContent = text; } catch(e){}
        };
        const getLocal = k => { try{ return localStorage.getItem(k); }catch(e){return null} };
        const setLocal = (k,v) => { try{ localStorage.setItem(k,String(v)); }catch(e){} };
        const hit = () => fetch(hitUrl, {method:'GET', cache:'no-store'}).then(r=>r.ok?r.json():Promise.reject(r)).then(d=>d && typeof d.value==='number'?d.value:null).catch(()=>null);
        const get = () => fetch(getUrl, {method:'GET', cache:'no-store'}).then(r=>r.ok?r.json():Promise.reject(r)).then(d=>d && typeof d.value==='number'?d.value:null).catch(()=>null);

        (async function(){
          try{
            if(within){
              const cached=parseInt(getLocal(storedKey)||'0',10);
              if(!isNaN(cached) && cached>0){ show(cached); return; }
              const g = await get(); if(g!==null){ show(g); setLocal(storedKey,g); return; }
              show('—');
            } else {
              const h = await hit(); if(h!==null){ show(h); setLocal(storedKey,h); setLocal(localVisitKey,now); return; }
              const g2 = await get(); if(g2!==null){ show(g2); setLocal(storedKey,g2); setLocal(localVisitKey,now); return; }
              let fallback=parseInt(getLocal(storedKey)||'0',10); fallback=isNaN(fallback)?1:fallback+1; setLocal(storedKey,fallback); setLocal(localVisitKey,now); show(fallback);
            }
          }catch(e){ show('—') }
        })();
      })();

      // Accessibility: add keyboard focusability and aria-describedby for tooltips
      (function a11y(){
        document.querySelectorAll('.btn, .info-btn').forEach(b => { if(!b.hasAttribute('tabindex')) b.setAttribute('tabindex','0'); });
        document.querySelectorAll('[data-tooltip]').forEach(el => {
          const tip = el.getAttribute('data-tooltip'); if(!tip) return;
          const id = 'tt-'+Math.random().toString(36).slice(2,9);
          const sr = document.createElement('div'); sr.id = id; sr.style.position='absolute'; sr.style.left='-9999px'; sr.setAttribute('aria-hidden','true'); sr.textContent = tip;
          document.body.appendChild(sr); el.setAttribute('aria-describedby', id);
        });
      })();
    })();
  </script>
</body>
</html>
